/*! jQuery email input - v1.0.2 - 2013-11-27
* https://github.com/jongha/jquery.emailinput.js
* Copyright (c) 2013 Jong-Ha Ahn; Licensed MIT */
!function(a){a.fn.emailinput=function(b){var c=a.extend({id:"eai_input",onlyValidValue:!0,delim:","},b);b=a.extend(c,b);var d=function(a){var b=/^([A-Za-z0-9_\-\.\+])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;return b.test(a)},e=function(c){var d=[];c.find("span"+(b.onlyValidValue?".ei_valid":"")).each(function(){d.push(a(this).data("address"))}),c.data("ref").val(d.join(b.delim))},f=function(b){var c=a.trim(b.val());if(""!==c){var f=d(c),g=b.parent();g.append(a("<span></span>").data("address",c).html(c).addClass("ei_box").addClass(f?"ei_valid":"ei_invalid").bind("click",function(){a(this).remove(),e(g)})),e(g)}return b},g=function(a){var b=a.parent();b.find("span:last").last().remove(),e(b)};return this.each(function(){var c=a("<div></div>").addClass(a(this).attr("class")).data("ref",a(this));c.bind("click",function(){var d=a("#"+b.id);0===d.length&&(d=a("<input />").attr({id:b.id,attr:"text"}).addClass("ei_box").css("border","none").bind("keydown",function(b){switch(b.keyCode){case 13:f(a(this)).val("").remove(),c.click();break;case 27:f(a(this).val("")).remove();break;case 8:case 46:""===a(this).val()&&g(a(this))}}).bind("blur",function(){f(a(this)).remove()}),a(this).append(d)),setTimeout(function(){d.focus()},5)}),a(this).hide(),a(this).parent().after().append(c)}),this}}(jQuery);